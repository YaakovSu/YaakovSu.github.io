---
layout: post
title: "计算广告作弊特点"
subtitle: ""
date: 2016-06-15
author: 苏爱马
category: 计算广告
tags: 反作弊
finished: true
---


## 计算广告

最近在学习计算广告里面的反作弊相关内容，在这里记录下学习过程和心得体会。突然发现一个好的计算广告介绍blog[计算广告学漫谈](http://blog.sina.com.cn/s/blog_62b832910102w1vr.html)。这位计算广告大牛的Blog收藏一下，哈哈[NiuGuoZhu](http://www.iamniu.com/)。



搜索作弊关键词：`GGAD作弊`, `计算广告 流量欺诈`, `计算广告 流量 欺诈  `, `计算广告 流量造假`

### 作弊手段

1. `僵尸用户`向其他真实的用户（大多是男性用户）批量（甚至手工）发送好友请求、留言等。或者直接在相应的讨论群组发布一些“热点讨论话题”。以校内论坛为例，就有不少人热衷于讨论这些“僵尸用户”所抛出的“处男、处女”问题、“学历与就业”问题。这样的“炒作”往往会获得大量的反向点击来到自己的“个人主页”。而通过一些欺诈手段，则将真实用户引导到一些投放了大量Google广告的网站。

2. **牺牲用户体验**，往往是让用户点击多次广告页面之后才能达到目标。例如门户惯用的方法：某一个图片点击过去，并非这张图片，而是一个（甚至可能不包含那张图片的）图片列表。列表旁罗列着各种广告信息；**彻底欺诈**则是，对本站完全不提供的内容进行“Black hat SEO”，比如，某视频网站根本就没有“色戒被删剪片段”，但对“色戒被删减片段”进行大量的关键词Spamming和外链导入。这样，就会有人愿意相信之。

3. [博客中看到的](https://club.1688.com/threadview/32286509.htm)

   1、一般是在 Cookie 与 IP 不变的情况下，重复地址广告。 
   他们多数是无固定的上彀环境，或是在校园机房里或是在网吧和上班时间段，形成广告的虚伪点击添加，若是他们情愿(等候点击后的页面翻开)，还能形成登入页(Landing Page)的页面阅读量(PV)添加;广告主手里的报表则显现为，转化次数极高。

   2、在Cookie与IP不变的情况下，不停地改写页面。 
   从展现的视点来看，会形成网页曝光(Impression)添加;从推行网站的视点，页面的PV会添加。

   3、懂得要必定频率地铲除 Cookie或许不支持Cookie。

   编一个软件/程序重复地铲除阅读时留下的Cookie，是十分简略完成的。当前许多中小广告联盟的监测东西是根据Cookie的。铲除去Cookie，即意味着每一次的拜访都是一个新的独立拜访者。像沙丁鱼、流量精灵等都是这样刷的。

   4、扔木马抓肉鸡、采办流量。

   每天都有许多的电脑中病毒，成为了受hei/k长途操控的肉鸡。凶猛的hei/k们会像将军一般地指挥不计其数的电脑一起作业，对他们来说最简略的最简略来钱的办法就是指令这些肉鸡翻开指定网站，点击页面上的广告。

   小结
   尽管好久之前已经有这样的做法，但仍是如今最盛行的造假办法，造假者不只寻求流量的增加，还开端了量化，经历的堆集下具有必定的反监才能。可是这种造假仍是比拟简略被发现。比方你的网站前后时间段的流量差异，及流量的来路奇特;一般此类流量的来路是直接拜访，或许是经过第三者中转过来，比方将你的网站链接到第三方，反常流量经过第三方的链接过来。

   不过想要发现能否作弊，条件是你得承受第三方的监测东西!经过东西能够明晰看到某些点击能否是同一个IP的人在改变着Cookie发生的，并且大部份广告的点击都是在来访的前一二个PV里发生的，每个来访的流量与点击都有一个大约的份额。

   ### 附baidu与谷歌的转化率的一些数据

   Baidu竞价与Google竞价：谷歌竞价的转化率(转化次数/点击量)为：3/171=1.75%，baidu竞价的转化率为：12/341=3.52%，Google竞价与Google网盟比照剖析：Google网盟的费用是Google竞价的1600/266=6倍，可是网盟的实际效果却是零，Google网盟的每访次深度是1.14，基本是用户点击广告后马上脱离，不会发生转化，没有实际效果。

4. Dstillery指出，排查出非人类流量网站的一个肯定正确的方法是该网站是否有高比例的相同访客。Dstillery联合创始人Rod Hook认为，即使网站有类似的题材，例如Boston.com和BostonRedSox.com，不应该有超过10％的受众重叠。Dstillery发现了一些看似没有自然联系的网站群（如一个网站专注于妇女健康，而另一个网站专注于中国电影）的观众重叠却高达90％，这是个明确的信号–这些网站大部分由机器人访问，而不是人类。[Dstillery公布最新“广告欺诈识别”技术专利](http://www.dspwhy.com/zixun/2014-06-26/228.html)。我们的想法就是不对有可疑活动的网站竞价，” Hook说。 “我们要拒绝对这类媒体的购买。

5. **生成虚假流量的组织以两种方式牟利，其一是自己创建网站，利用虚假流量吸引广告客户；其二是向合法网站收费，为后者带来虚假流量。数字广告购买的自动化促进了第一种类型的欺诈活动。**

6. **虚假点击僵尸网络”相当复杂，它们能通过远程控制家用计算机，劫持用户身份，时间通常在午夜至早上7点之间**

7. 僵尸网络能模拟用户的活动，点击的广告只`略多于真正用户`，甚至在图片上拖动鼠标，并把商品放在购物车内，只是不会真正购买商品。通过这种方式，僵尸网络能模拟广告客户最喜欢的购物行为。

8. 秒针公司对广告虚假流量的界定: 秒针系统日前发布《互联网广告反作弊技术白皮书》，把点击率异常、IP分布异常、URL/访问者指纹信息（浏览器、操作系统等）异常、点击没有对应的曝光请求、来源异常、时间分布异常等六种非正常广告行为界定为虚假流量。​

9. 其他一些作弊策略

   作弊策略包括：模拟http请求、回放人工点击、模拟浏览器输入。

   1. 模拟http请求（易识别）：通过分析请求的参数规则，填充请求的参数，可是模拟http请求很难模拟出交互时的所有请求参数。
   2. 重放人的输入(易识别)：操纵按键精灵记录人点击位置。
   3. 模拟浏览器输入：常见htmlunit，phantomjs和webdriver，这些都可以模拟人在浏览器的所有操作（包括打开网页、点击链接、前进后退、鼠标移动等行为）。

10. **秒针公司定义的广告作弊行为**

    1、**广告CTR 异常：** 主要指虚拟点击或恶意点击，即Click/PV 过高比例，或者起伏很大。

    2、**广告访问IP 分布异常**： 通过Log 日志发现某几个IP 产生大量的点击或者曝光数。

    3、**URL，访问者指纹信息(浏览器，操作系统等)异常：** 例如大量的点击或者曝光数，都来自于同一版本的浏览器或操作系统，或者占比过高;或者点击或曝光的访问者信息中带有Robot/Spider 等标识信息。

    4、**广告点击没有对应的曝光请求：** 如果广告同时监测了曝光和点击，广告的点击IP/MZID 前都应该出现对应广告的曝光，且绝大多数都应该出现在同时段的曝光日志中。

    5、 **广告来源异常：** 点击或者曝光的Referer 可以标记点击或曝光的来源页面，如果大量来源集中在某一页面，且不是广告所在的Web 页面，可能存在媒体在其他流量大的地方(如BBS)设置隐藏页面来充当曝光和点击。

    6、**广告访问时间分布异常/规律**： 某些IP/MZID 每分钟定时出现在点击/曝光日志中，或者连续点击/曝光的发生时间的间隔过于规律。

11. ​

    ## 反作弊方法

      因为作弊技术在日新月异的更新，而反作弊技术也要求较高的可信性和强可解释性。作弊技术一般以规则配合少量机器学习算法来配合使用。反作弊技术一般分为：请求参数校检、用户请求行为分析、页面访问分析、请求有效验证和作弊访问的关联分析。

              a. 用户请求校检：主要基于访问的http请求的参数匹配和有效性分析。可选的特征包括时间戳、Referer、IP（黑白名单）、请求操作系统、请求参数匹配/有效性分析、请求源识别。

              b. 用户请求行为分析：鼠标和键盘事件检测、留存时间、访问时间分析。正常情况下，这些特征的数值都会服从正态/高斯分布，可以引入卡方距离衡量正常的分布与作弊分布的距离，并选取合适的阀值来界定作弊点击/渠道。

              c. 页面访问分析： 该网页的搜索词分析、点击率分析（一跳、二跳、到达分析）、页面访问行为分析。

              d. 请求有效性验证：放置虚假广告诱导作弊系统点击、回ping有效性分析。

              e. 作弊访问的关联分析：分析判定作弊的用户/渠道点击的广告，分析各个点击之间的关联关系。

         1. 作弊点击的关联分析：

         2. 低质量广告过滤：

              有些广告主会恶意的展现一些欺诈/违法/色情的广告，这对搜索引擎广告平台来说意味着法律和经营风险。因此我们需要将这些低质量的广告进行过滤。而不法广告主喜欢使用的技术有欺骗性重定向、门页技术、恶意修改广告内容，搜索引擎公司可选的对抗技术有：

              a. 工程方向：将执行js的匿名爬虫和搜索引擎的爬虫分别爬取的结果进行比对。

              b. 研究方向：根据恶意广告主的广告、行为特征进行学习。

              c. 运营方向/机制设计：增加广告主审核标准，增加恶意广告主惩罚。

    5、站长为了赚钱,会故意增加广告的点击率,以此获得更多的收入。而广告联盟会对广告的点击率作控制, 目前一般是控制在5%以内,如果超过了这个比率,很有可能会被广告联盟判为作弊,然后被K掉。

    6、站长重复点击广告的时候,会被INTERNET 中的小甜饼S记录下来, 如果再次点击,就是很明显的重复点击，也会被广告联盟K掉。即使清空IE中的小甜饼S以后再点击还是难逃法网。

    7、 IP防止作弊：一般计费方式是按照24小时内唯一IP，可以将每个IP记入数据库，当下一个访问IP与数据库已存在的IP相同时，则不计费。现在上网一般是动态IP，作弊者通过拨号器上下线来实现改变IP地址，你可以通过C段IP来辨别，如大量出现58.49.11.x这种相同C段的IP号，则可能被广告联盟认定为作弊。

    8、来源统计防止作弊：1、记录该点击的来路页面，即广告放置页面的地址，可以人工巡查广告放置是否正确，查看旁边是否有引导性不良语句。2、记录放置广告页面的来路，每个站点的搜索引擎来路总是占据很大的一个比例，如果该页面没有来路，可以判断这个页面的流量非连接流量，

    9、 时间顺差防止作弊：当你打开一个有广告的页面时，一般情况下不可能瞬间点击广告，因为每个广告都由印象转变为关注，再转变成点击行动，你可以设置当访问者打开网站页面几秒内点击广告为作弊行为. 当几次广告点击的时间差完全一致时，也可以判断为机器人点击行为。当你打开一个广告，在几秒内立即关闭，也可以判断为无效点击。Google adsense联盟同样也采用此方法判断无效点击。

    10、结合ALEXA数据防止作弊：ALEXA虽然不是一个标准，但却是极好的参考工具，当一个ALEXA数值很大的站点产生了很高的广告点击量，就产生疑问了，网站自然流量从何而来？

    11、通过唯一参数防止作弊：网卡MAC物理地址、硬盘序列号，通过该类软硬件信息生成机器码。较大的广告联盟里通过记录广告点击者的电脑的网卡MAC物理地址来判断是否此用户在相同的时间段或者长时间的点击广告，从而判断是否作弊。

    12、鼠标值：1、显示屏幕上的每个点都具有一个坐标值，当你在某个点按下鼠标时，都会有一个坐标值，当采用机器人点击时，为同一个鼠标值，可以只记一次点击。2、每次点击都会产生鼠标的KEYUP和KEYDOWN的行为，如果未能捕获到这个值，可能是模拟数据提交。

    13、*一些计算广告从业者的说法*

    > 1.强化SDK防作弊模块：提供基于异常时差防护策略，根据校验分析点击、激活的时差设定范围，排除异常数据。
    >
    > 2.增设设备验证信息：在收到激活请求时，服务器端将按照协定的设备信息使用特殊算法校验每一组数据，将无效或伪造的数据拦截。
    >
    > 3.IP离散度校验功能：提供基于异常IP段防护策略，超过设定的IP数的峰值范围的数据，将会被防作弊功能自动过滤，从而确保数据的真实有效。
    >
    > 4.广告效果监测+反作弊组合功能：任何投机取巧的行为只要触发反作弊功能系统设定，异常数据就会被即刻过滤。
    >
    > 5.借助第三方检测机构：市场上一些第三方的监测结构，凭借自己第三方的中立性，兼顾全平台的数据，进行作弊防护。

    目前，腾讯广点通、点入广告等专业的移动广告平台/联盟都有非常完善的防作弊机制，通过各种维度（包括IP分析、用户行为习惯分析、系统识别、设备识别、点击激活时间间隔、）对作弊行为进行拦截，帮助广告主过滤可疑流量，为广告投放效果保驾护航。

    14、特征很直接，包含了各种流量行为，包括点击率、转化率、使用的浏览器甚至点击行为在页面上发生的位置

    ​

    ​

    ## 在线广告作弊手段一览

    这里提到的在线广告作弊是指媒体为了刷广告流量而进行的作弊。

    ### CPM广告的作弊方式

    1、iframe是广告作弊最常用的技巧，就是在自己的网页上嵌入iframe, 大小为0×0或1×1，也就是用户不可见。通过iframe打开其他页面，在用户看不见的情况下刷流量。别看iframe简单，里面花样很多。

    **\*页面内嵌入本站页面的iframe***

    iframe打开和当前页一样的页面地址，或本站的其他页面。 这样用户的一个浏览行为，很轻松就从1个pv翻倍变成2个pv。如果嵌入iframe多点， 就能翻3倍，4倍…。

    解决办法：广告投放方，通过分析UV，独立IP等很容易就发现异常。

    **\*两个站点间互相嵌入对方站点页面的iframe***

    这是比较巧妙的作弊技巧，UV，独立IP等分析方法是不能发现异常的。

    **\*双层iframe***

    作弊的iframe为了不让人看见，大小只有0×0或1×1，但有些在线广告在显示时会判断浏览窗口大小，如果太小可能就不能显示。这时有些网站就采用了双层iframe技术来刷广告流量。 第一层1×1大小的iframe中又嵌入一个iframe，这个第二层iframe是正常浏览窗口大小，广告代码很难发现异常。

    这种作弊方式使用巧妙的，会让主页面和两个iframe使用三个不同的域名，这样因为跨域的问题， 里面的js不可能得到最外层真正的页面地址， 想抓证据都抓不到。

    2、**\*IP屏蔽***

    有些站点在进行作弊时，会屏蔽北京，上海等大城市的访问，你从这些地区访问时，看不到他们的作弊代码，一切正常。等换用其他地方的代理访问时，你在他们页面里就能看到作弊用iframe代码。 这是因为很多IT，在线广告公司都在这些大城市，这种屏蔽让他们的作弊手段很难被同业发现。

    3、**购买垃圾流量**

    现在来自iframe，木马的垃圾流量都是明码标价在卖的，可以用这些流量来刷页面，刷广告。这种也比较难以发现。

    网站去刷流量目的往往比较复杂，一是刷广告流量，赚广告商和广告主的钱，二是为了alexa之类的排名，也有是为了给投资人看所谓的“业绩”。

    4、原始作弊方式

    目前还有大量的小流量媒体采用更原始的方式，那就是强制刷新页面，在用户看页面时，每个几秒页面就刷新一次。

    ### CPC作弊方式

    CPC作弊其实是很简单的，只要用iframe打开点击链接即可

    ### CPA作弊方式

    有些网站广告按CPA结算，比如注册人数等。 这种情况下，有的公司会做专门的自动注册机，保证你的注册人数疯狂上涨

    ### CPS作弊方式

    相对较难，但

    **Cookie Stuffing**

    Cookie Stuffing指的是通过网站上安装的特别的程序,把特定的Cookie植入访问者的电脑里，当电脑的使用者，去一些特定的网站买东西的时候，你就有了提成。Cookie Stuffing的存在是因为广告联盟用Cookie来跟踪业绩。Cookie产生后被存放在用户的浏览器中，当用户在广告主网站上产生任何的消费行为时，因为这个Cookie的存在，广告主会认定此次销售是你带过去的，因此，你可以获得提成。

    **Http劫持**

    对CPS模式的广告平台来说，会通过为每一个推广渠道创建唯一的pid来分辨不同渠道的效果。而Http劫持表现为不管用户从哪一个渠道、哪一条推广链接进入，pid都会被替换为特定的pid，剥夺了原本应该获得收益的渠道的收益。

    **DNS劫持**

    DNS劫持相比Http劫持替换正常渠道pid的做法，还算只是利己、未损人。一般做法是将用户正常的访问进行多次跳转，跳转到返利站点推广渠道或者淘宝客的推广渠道。

    ​

    ​

    ## 如何从日志中发现广告被作弊

    [链接](http://www.iamniu.com/2012/09/07/how-to-find-the-website-cheating-in-the-log/)

    所谓可疑点，有两个角度判断，第一是从相同维度来看，本维度的唯一数据项（汇总数据）占所有日志的比例不均匀；第二是以某一个维度汇总的数据中，其他维度上的数据分布不平均或者出现极值。两个角度的比较必须是多媒体的数据比较。这些数据维度一般有：IP、User-Agent、Cookie ID、访问时间、访问页面等。我们以[演示日志](http://www.iamniu.com/wp-content/uploads/2012/09/demolog.xlsx)来进行说明。

    第一步、相同维度分析，按照经验，IP是容易检查出异常的维度。

    第二步，对up的访问记录进行分析，判断是否为作弊ip。

    ​

    ​

    ​





